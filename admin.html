<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard Page</title>
</head>
<body>
    <div class ="navbar">Fleet management Admin</div>
    <div class ="sidebar">
        <h3>Create fleet</h3>
        <input type = "text" id="reg no" placeholder="Reg No of vehicle"/>
        <select id ="category">
            <option value="">Select category</option>
             <option value="auto">auto</option>
              <option value="car">car</option>
               <option value="bike">bike</option>
                <option value="bus">bus</option>
                 <option value="truck">Truck</option>
        </select>
        <input type ="text" id="driver"placeholder="driver name"/>
    <label><input type="checkbox" id ="available"/>is available</label>
<button onclick="addfleet()">Add fleet</button>
</div>
<div class = "main" id="fleetContainer"></div>
<script>
    function addFleet(){
        let reg= document.getElementById("regno").value;
        let cat=document.getElementById("category").value;
        let driver=document.getElementById("driver").value;
        let available=document.getElementById("avialable").checked;
        if(!reg || !cat ||!driver){
            alert("All fields are required.");
            return;
        }

        let conatiner=document.getElementById("fleetContainer");
        let card= document.createElement("div");
        card.className ="card";
        card.innerHTML='<img src="ttps://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png"width =100%"/>
        <h3>$(reg)</h3>
        <p>category:${cat}</p>
        <p>Driver:<span class="driver-name">${driver}</span></p>
        <p>Status:<span class="status">${avaialble ? "Available":"Unavailable"}</span></p>
        <button onclick="updateDriver(this)">Update Driver</button>
        <button onclick="changeStatus(this)">Change Availability</button>
        <button onclick ="deleteVehicle(this)">Delete</button>';
        container.appendChild(card);
    }
    function updateDriver(btn){
        let newDriver = prompt("Enter new driver name:");
        if(newDriver){
            btn.parentElement.qyerySelector("driver-name").innerText = newDRiver;
        }
    }
    function changeStatus(btn){
        let statusSpan= btn.parentElement.qyerySelector(".status");
        statusSpan.innerText = statusSpan.innerText === "Available"? "Unavailable":"Available";
    }
    function deleteVehicle(btn){
        btn.parentElement.remove();
    }
    let allFleets = [];
    function addFleet(){
        let reg = document.getElementById("reg no").value.trim();
            let cat=document.getElementById("category").value;
            let driver = document.getElementById("driver").value.trim();
            let available=document.getElementById("available").checked;
            if(!reg ||!cat||!driver){
                alert("All fields are required");
                return;
            }
            let fleetObj = {
                reg,
                cat,
                driver,
                available
            };
            allFleets.push(fleetObj);
            renderFleets(allFleets);
            document.getElementById("regno").value="";
            document.getElementById("category").value="";
            document.getElementById("driver").value="";
            document.getElementById("available").checked=false;

        
    }
    function renderFleets(list){
        let container = document.getElementById("fleetContainer");
        container.innerHTML="";
        list.forEach(fleet => {
            let card = document.createElement("div");
            card.className="card";
            card.innerHTML= 
            <h3>${fleet.reg}</h3>
            <p>category: ${fleet.cat}</p>
            <p>driver:<span class ="driver-name">${fleet.driver}</span></p>
            <p>Status:<span class="status">${fleet.available ? "Available":"Unavailable"}</span></p>

            <button onclick ="updateDriver(this,'${fleet.reg}')">Upadte Driver</button>
            <button onclick ="changeStatus(this,'${fleet.reg}')">Change Availability</button>
            <button onclick ="deleteVehicle(this,'${fleet.reg}')">Delete</button>
            ;
            container.appendChild(card);
        });

        function updateDriver(btn,reg){
            let newDriver = prompt("Enter new driver name:");
            if(!newDRiver || newDriver.trim() === ""){
                alert("Driver name cannot be empty.");
                return;
            }
            let fleet = allFleets.find(f => f. reg===reg);
            fleet.driver = newDriver;
            btn. parentElement.querySelector(".driver-name").innerText= newDriver;
        }
        function changeStatus(btn,reg){
            let fleet =allFleets.find(f =>f .reg === reg);
            fleet.available= !fleet.available;
            btn.parentElement.querySelector(".status").innerText= fleet.available ? "Available":"unavailable";
        }
        function deleteVehicle(btn,reg){
            if(confirm("are you sure you want to delete this vehicle?")){
                allFleets= allFleets.filter(f => f. reg !== reg);
                btn.parentElement.remove();
            }
        }
    }
</script>
</body>
</html>